enum SupplyStatus {
    PENDING // PO created, supply not started
    APPROVED // Approved for dispatch
    IN_TRANSIT // Vendor dispatched material
    PARTIALLY_RECEIVED
    RECEIVED // Fully received
    REJECTED
}

enum SupplyType {
    TO_INVENTORY
    DIRECT_TO_SITE
}

model VendorSupplyManagement {
    id Int @id @default(autoincrement())

    vendor_id               Int
    supply_type             SupplyType
    po_id                   Int?
    amount                  String
    payment_terms           String?
    status                  SupplyStatus                  @default(PENDING)
    direct_supply_config    DirectSupplyConfiguration?
    inventory_supply_config InventorySupplyConfiguration?
    vendor                  Vendor                        @relation(fields: [vendor_id], references: [id], onDelete: Cascade)
    po                      PO?                           @relation(fields: [po_id], references: [id], onDelete: Cascade)

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    @@map("vendor_supply_management")
}

model DirectSupplyConfiguration {
    id                Int     @id @default(autoincrement())
    supply_id         Int     @unique
    project_id        Int
    chainage_location String?
    delivery_location String?
    fob_destination   String?

    supply  VendorSupplyManagement @relation(fields: [supply_id], references: [id], onDelete: Cascade)
    project Project                @relation(fields: [project_id], references: [id], onDelete: Cascade)

    @@map("direct_supply_configuration")
}

model InventorySupplyConfiguration {
    id                     Int       @id @default(autoincrement())
    supply_id              Int       @unique
    warehouse_location     String?
    expected_delivery_date DateTime?
    batch_number           String?
    quality_check_status   String? // Accepted / Rejected / Pending

    supply VendorSupplyManagement @relation(fields: [supply_id], references: [id], onDelete: Cascade)

    @@map("inventory_supply_configuration")
}
