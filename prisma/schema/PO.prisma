enum POStatus {
    DRAFT
    ISSUED
    PARTIALLY_DELIVERED
    DELIVERED
    CANCELLED
    CLOSED
}

enum TransportMode {
    ROAD
    RAIL
    SEA
    AIR
    SELF_PICKUP
}

model PO {
    id Int @id @default(autoincrement())

    pr_id      Int
    project_id Int
    vendor_id  Int

    po_code                String    @unique
    po_date                DateTime  @default(now())
    expected_delivery_date DateTime?

    transport_mode TransportMode?

    total_amount String

    po_status POStatus @default(DRAFT)

    payment_terms  String?
    delivery_terms String?

    shipping_address String?
    billing_address  String?

    remarks String?

    order_items             POOrderItem[]
    pr                      PR                       @relation(fields: [pr_id], references: [id])
    project                 Project                  @relation(fields: [project_id], references: [id])
    vendor                  Vendor                   @relation(fields: [vendor_id], references: [id])
    created_at              DateTime                 @default(now())
    updated_at              DateTime                 @updatedAt
    grns                    GRN[]
    vendorSupplyManagements VendorSupplyManagement[]

    @@index([pr_id])
    @@index([project_id])
    @@index([vendor_id])
}

model POOrderItem {
    id Int @id @default(autoincrement())

    po_id       Int
    material_id Int

    quantity String
    rate     String
    amount   String

    po       PO       @relation(fields: [po_id], references: [id], onDelete: Cascade)
    material Material @relation(fields: [material_id], references: [id])

    created_at DateTime @default(now())
}
