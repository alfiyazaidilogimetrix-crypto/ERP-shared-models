model InventoryManager {
    id     Int  @id @default(autoincrement())
    userId Int  @unique
    user   User @relation(fields: [userId], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    stock_material InventoryStockEntry[]

    @@map("inventory_manager")
}

model InventoryStockEntry {
    id          Int @id @default(autoincrement())
    inventoryId Int
    stockId     Int

    inventory InventoryManager @relation(fields: [inventoryId], references: [id], onDelete: Cascade)
    stock     Stock            @relation(fields: [stockId], references: [id], onDelete: Cascade)

    @@unique([inventoryId, stockId])
    @@map("inventory_stock_entry")
}

model InventoryHistory {
    id Int @id @default(autoincrement())

    manager_id   Int
    project_id   Int
    total_amount Float?
    items_data   Json

    manager User    @relation(fields: [manager_id], references: [id])
    project Project @relation(fields: [project_id], references: [id])

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("inventory_history")
}
