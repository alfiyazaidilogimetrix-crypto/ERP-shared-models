enum ProjectType {
    HAM
    EPC
    BOT
    OTHER
}

enum ProjectStatus {
    PLANNED
    IN_PROGRESS
    ON_HOLD
    COMPLETED
    CANCELLED
}

model Project {
    id           Int         @id @default(autoincrement())
    project_type ProjectType
    project_name String
    project_code String
    start_date   DateTime?
    end_date     DateTime?

    budget String?
    status ProjectStatus @default(PLANNED)

    client          String?
    description     String?
    progress        Int? // 0–100 %
    manager_id      Int?
    project_manager User?               @relation(fields: [manager_id], references: [id])
    district        String?
    state           String?
    pincode         String?
    from_length     String?
    to_length       String?
    total_length    String?
    total_chainage  String[]
    ham_details     HAMSpecificDetails?
    epc_details     EPCSpecificDetails?
    bot_details     BOTSpecificDetails?
    other_details   Json?

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    directSupplyConfigurations DirectSupplyConfiguration[]
    sub_contractors            ContractorProject[]
    chainageConsumptionLedgers Chainage_consumption_ledger[]
    prs                        PR[]
    pos                        PO[]
    dieselTransactions         DieselTransaction[]
    dprs                       DPR[]

    labourAttendances LabourAttendance[]

    scopes        Scope[]
    project_files ProjectFile[]

    @@map("project")
}

model HAMSpecificDetails {
    id         Int @id @default(autoincrement())
    project_id Int @unique

    annuity_amount             String?
    annuity_period             Int? // in years
    construction_period        Int? // in months
    maintenance_responsibility String?
    progress                   Int? // 0–100 %

    project Project @relation(fields: [project_id], references: [id], onDelete: Cascade)

    @@map("ham_specific_details")
}

model EPCSpecificDetails {
    id         Int @id @default(autoincrement())
    project_id Int @unique

    engineering_scope     String?
    procurement_budget    String?
    construction_timeline String?
    performance_guarantee String?
    progress              Int? // 0–100 %

    project Project @relation(fields: [project_id], references: [id], onDelete: Cascade)

    @@map("epc_specific_details")
}

model BOTSpecificDetails {
    id                              Int     @id @default(autoincrement())
    project_id                      Int     @unique
    concession_period               Int? // in years
    estimated_operating_cost        String? // per year
    toll_revenue_collection_enabled Boolean @default(false)
    transfer_condition              String?

    project Project @relation(fields: [project_id], references: [id], onDelete: Cascade)

    @@map("bot_specific_details")
}

model ProjectFile {
    id         Int     @id @default(autoincrement())
    project_id Int
    project    Project @relation(fields: [project_id], references: [id], onDelete: Cascade)
    file_id    Int
    file       File    @relation(fields: [file_id], references: [id], onDelete: Cascade)

    @@map("project_file")
}
